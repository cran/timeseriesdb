<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Advanced Usage</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Advanced Usage</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timeseriesdb)</span></code></pre></div>
<div id="starting-point" class="section level2">
<h2>Starting Point</h2>
<p>We assume you are past the basics and R, {timeseriesdb} and
PostgreSQL are up and running. (<em>For the remainder of this guide we
assume PostgreSQL runs on a local docker container accessible via port
1111.</em>)</p>
</div>
<div id="versioning-of-time-series-vintages" class="section level2">
<h2>Versioning of Time Series (Vintages)</h2>
<p>A core feature of {timeseriesdb} is the ability to store vintages,
i.e., different versions of time series. The package was created with
official and economic statistics in mind, so data revisions and the
ability to evaluate forecasts play an important role in the package
design. Hence {timeseriesdb} versions every time series it stores by
default.</p>
<p>Let’s assume <code>baro_2019m10</code> is a time series published in
October 2019 and <code>baro_2019m11</code> is yet another version of the
very same time series. We can simply store</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;kof_ts&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">db_ts_store</span>(con,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">list</span>(<span class="at">ch.kof.barometer =</span> kof_ts<span class="sc">$</span>baro_2019m10),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">valid_from=</span><span class="st">&quot;2019-10-30&quot;</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">db_ts_store</span>(con,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">list</span>(<span class="at">ch.kof.barometer =</span> kof_ts<span class="sc">$</span>baro_2019m11),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">valid_from=</span><span class="st">&quot;2019-11-30&quot;</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>and read them under the same key.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_ts_read</span>(con, <span class="st">&quot;ch.kof.barometer&quot;</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>Note how the default validity (today per <code>Sys.Date()</code>) is
used when <code>valid_on</code> is not specified. You can also get read
the entire history which returns a list of time series that contains
version of time series. List elements will be named according validity
thresholds.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tsl <span class="ot">&lt;-</span> <span class="fu">db_ts_read_history</span>(con,<span class="st">&quot;ch.kof.barometer&quot;</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
</div>
<div id="datasets" class="section level2">
<h2>Datasets</h2>
<p>Make sure the time series you want to register and set itself are
actually around. Creating sets is an admin level function. Assigning
series to a dataset is <em>not</em> a vintage level operation, it
applies to all versions of a series. This is why time series are
assigned to the ‘default’ schema at first when they are stored and can
be moved later on.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_ts_assign_dataset</span>(con,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ts_keys =</span> <span class="fu">c</span>(<span class="st">&quot;ch.zrh_airport.arrival.total&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;ch.zrh_airport.departure.total&quot;</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">set_name =</span> <span class="st">&quot;ch.zrh_airport&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p><strong>Note</strong> that there is no such thing as remove time
series from dataset. Either you delete a time series entirely or you
assign it to another dataset. Think of a registry similar to a software
registry.</p>
<p>To see all keys registered in a dataset simply call:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_get_dataset_keys</span>(con, <span class="st">&quot;ch.zrh_airport&quot;</span>, <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>To do the opposite, that is, find out which dataset series are
assigned to, run:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_get_dataset_id</span>(con, <span class="st">&quot;ch.zrh_airport.arrival.total&quot;</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>With <a href="../reference/db_dataset_read_ts.html">db_dataset_read_ts()</a> you
can read all time series from a given dataset.</p>
</div>
<div id="release-management" class="section level2">
<h2>Release Management</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_list_releases</span>(con, <span class="at">include_past =</span> T, <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>Cancelling a future release is simply a matter of calling <a href="../reference/db_release_cancel.html">db_release_cancel()</a>.
Cancellation of past releases is not possible, but release can be
updated with <a href="../reference/db_release_update.html">db_release_update()</a>. Also
you can easily query the latest release</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_get_latest_release_for_set</span>(con, <span class="st">&quot;ch.zrh_airport&quot;</span>,<span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>Similarily use <a href="../reference/db_dataset_next_release">db_dataset_next_release()</a>
to get the next upcoming release.</p>
</div>
<div id="collections" class="section level2">
<h2>Collections</h2>
<p>Collections are another concept introduced in v1.0.. Collections are
user specific compositions of time series identifiers. Users of earlier
versions of time series may think of this functionality as ‘sets’. To
avoid any confusion, let’s be clear about the new terminology here:</p>
<ul>
<li><p>datasets = registration of time series into global datasets. This
happens typically at the admin level. Time series are unique ACROSS
datasets.</p></li>
<li><p>collection = playlist are like user specific bookmarks. A time
series can part of multiple collections, users can have multiple
collections. The purpose of collections is to be able to re-visit a
selection of time series after updates etc, e.g., to update time series
visualizations.</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_collection_add</span>(con, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">collection_name =</span> <span class="st">&quot;demo_collect&quot;</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">keys =</span> <span class="fu">c</span>(<span class="st">&quot;ch.zrh_airport.arrival.total&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;AirPassengers&quot;</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">description =</span> <span class="st">&quot;Flying Around Now and Then&quot;</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>You can remove keys from a collection using <a href="../reference/db_collection_remove_ts.html">db_collection_remove_ts()</a>
and delete an entire collection with <a href="../reference/db_collection_delete">db_collection_delete()</a>.</p>
</div>
<div id="advanced-meta-information" class="section level2">
<h2>Advanced Meta Information</h2>
<p>Context aware data description is one of the core aims of
{timeseriesdb}. Meta information done properly can quickly become a
complex topic: descriptions can be assigned at different levels.
Descriptions can be language agnostic or language specific. Moreover
with versioned time series descriptions can also be specific to a
particular version of a time series.</p>
<div id="multi-language-data-descriptions" class="section level3">
<h3>Multi Language Data Descriptions</h3>
<p>Simply create meta information objects for each language, similar to
the fashion we’ve seen in the <a href="a01_basic_usage.html">Basic
Usage</a> article. Meta information objects can hold descriptions for
one or more time series. Make sure you do NOT change the language within
one object.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>de <span class="ot">&lt;-</span> <span class="fu">create_tsmeta</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ch.zrh_airport.arrival.total =</span> <span class="fu">list</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">provider =</span> <span class="st">&quot;Flughafen Zürich&quot;</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">description =</span> <span class="st">&quot;Eine deutschsprachige Beschreibung&quot;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>en <span class="ot">&lt;-</span> <span class="fu">create_tsmeta</span>(</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ch.zrh_airport.arrival.total =</span> <span class="fu">list</span>(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">provider =</span> <span class="st">&quot;Zurich Airport&quot;</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">description =</span> <span class="st">&quot;An English speaking description&quot;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="fu">db_store_ts_metadata</span>(con,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>                     <span class="at">metadata =</span> de,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>                     <span class="at">valid_from =</span> <span class="fu">Sys.Date</span>(),</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>                     <span class="at">locale =</span> <span class="st">&quot;de&quot;</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>                     <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="fu">db_store_ts_metadata</span>(con,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>                     <span class="at">metadata =</span> en,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>                     <span class="at">valid_from =</span> <span class="fu">Sys.Date</span>(),</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                     <span class="at">locale =</span> <span class="st">&quot;en&quot;</span>,</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>Retrieving the information is just as simple, let’s get the English
description…</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">db_read_ts_metadata</span>(con, <span class="st">&quot;ch.zrh_airport.arrival.total&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">locale =</span> <span class="st">&quot;en&quot;</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">valid_on =</span> <span class="fu">Sys.Date</span>(),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
</div>
<div id="levels-of-assignment" class="section level3">
<h3>Levels of Assignment</h3>
<p>Meta descriptions can be assigned at various levels. Descriptions
either belong to a <em>dataset</em>, to a <em>time series</em> or two a
<em>vintage of a time series</em>. Meta information is only loosely
coupled to vintages of time series, because in most usecases meta
descriptions do not change every time there is a data revision. So by
simply not updating unchanged descriptions when data are revised /
updated, we allow descriptions to last for multiple versions of a time
series.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">db_get_metadata_validity</span>(con, <span class="st">&quot;ch.zrh_airport.arrival.total&quot;</span>, </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">locale =</span> <span class="st">&quot;de&quot;</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">schema =</span> <span class="st">&quot;tsdb_test&quot;</span>)</span></code></pre></div>
<p>helps to get and overview find out since when meta information is
valid. Note that dataset level meta information can currently only be
assigned when the dataset is created and is not versioned.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
